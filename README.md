# Trust Chat Platform

## 概要

Trust Chat Platformは、分散型チャットボットプラットフォームである。ユーザーがオンチェーンで記録された透明性の高いAIモデル情報を確認しながら、複数のAIモデルから選択してチャットを楽しめる環境を提供する。特に、deepseekのように学習時に恣意的な情報が与えられる可能性があるモデルに対して、ユーザーが安心して利用できる選択肢を提示し、社会へのネガティブなインパクトを回避するための仕組みを提供する。

また将来的には、地方ごとに八百万の神々のような形でローカルLLMが各地に特化した形で出現すると考えられるため、そういった際の基盤として活用されることを目指している。

Internet Computer (ICP) 上に構築されており、ブロックチェーン技術の透明性と検証可能性を活かしたAIモデルの信頼性検証システムを特徴とする。

## 主な機能

1. **モデルマーケットプレイス**: 利用可能なAIモデルの一覧表示
2. **モデル検証機能**: 各モデルの信頼性を検証するための詳細情報表示
3. **チャットインターフェース**: 選択したモデルとのチャット機能
4. **モデル開発者向け機能**: （未実装）AIモデル開発者がモデルを登録・管理するための機能

## プロジェクト構成

- **registry-canister**: モデルの登録と管理を行うキャニスター
- **model-canister-template**: 各AIモデルを実行するためのテンプレートキャニスター
- **trust-chat-platform-frontend**: ユーザーインターフェースを提供するフロントエンドキャニスター

## ローカルでの実行方法

以下のコマンドでプロジェクトをローカルで実行できる：

```bash
# レプリカをバックグラウンドで起動
dfx start --background

# キャニスターをデプロイ
dfx deploy --network playground
```

デプロイが完了すると、アプリケーションは `http://localhost:4943?canisterId={asset_canister_id}` で利用可能になる。

## フロントエンド開発

フロントエンドの変更を行う場合は、以下のコマンドで開発サーバーを起動できる：

```bash
cd src/trust-chat-platform-frontend
npm start
```

これにより、`http://localhost:8080` でサーバーが起動し、ポート4943のレプリカにAPIリクエストがプロキシされる。

## ICネットワークへのデプロイ

ICネットワークにデプロイするには、以下のコマンドを使用する：

```bash
dfx deploy --network ic
```

## モデル検証機能

Trust Chat Platformの核となる機能は、AIモデルの信頼性を検証する機能である。各モデルについて以下の情報を提供する：

### 1. キャニスター情報
- キャニスターID
- モジュールハッシュ
- コントローラー

### 2. API検証情報
- APIエンドポイント
- レスポンスサンプル
- レイテンシと成功率

### 3. セキュリティ監査情報
- 最終監査日
- 監査者

## 信頼スコアシステム

各モデルには0〜10の信頼スコアが付与される。このスコアは以下の要素を考慮して算出している：

1. **API連携型モデル**: OpenAI、Anthropicなどの外部APIを利用するモデル
2. **ローカルLLM型モデル**: HuggingFaceなどのオープンソースモデルをベースにカスタマイズしたモデル

信頼スコアは以下の要素から算出される：

1. **モデル透明性** (30%): 
   - API型：使用APIの公式性、バージョン、制限事項
   - ローカル型：ベースモデル情報、ファインチューニング詳細

2. **検証可能性** (25%): 
   - 動作の一貫性
   - 出力の予測可能性
   - エラー処理の適切さ

3. **データ処理透明性** (20%): 
   - ユーザーデータの処理方法
   - プライバシー保護対策

4. **コミュニティ評価** (15%): 
   - ユーザーレビュー
   - 報告されたインシデント

5. **オンチェーン検証** (10%): 
   - 登録情報の完全性
   - 変更履歴の追跡可能性

これらの情報はすべて、モデルがキャニスターとして登録される際に記録され、ブロックチェーン上で改ざん不可能な形で保存される。

## 将来の分散型評価システム

現在のスコアリングシステムはプロトタイプ段階であり、将来的には以下のような分散型評価システムへと発展させる計画がある：

1. **分散型検証ネットワーク**: 複数の独立した検証者によるモデル評価
2. **オンチェーン評価記録**: ブロックチェーン技術を活用した改ざん不可能な評価履歴
3. **自動検証プロトコル**: AIモデルの動作を自動的に検証する標準プロトコル
4. **コミュニティガバナンス**: 評価基準の更新や改善をコミュニティが主導

これらの情報はすべて、モデルがキャニスターとして登録される際に記録され、ブロックチェーン上で改ざん不可能な形で保存される。

## 今後のロードマップ

### モデル開発者向け機能（未実装）

将来的に実装予定のAIモデル開発者向け機能には以下が含まれる：

1. **モデルデプロイツール**: 開発者が自身のAIモデルを簡単にICPネットワーク上にデプロイできるツール
2. **モデル管理ダッシュボード**: モデルのパフォーマンス、使用状況、収益などを管理・分析するダッシュボード
3. **APIキー管理**: 外部AIサービスとの連携のためのAPIキー管理システム
4. **カスタムモデル設定**: モデルの動作パラメータやコンテキスト設定をカスタマイズする機能
5. **バージョン管理**: モデルの異なるバージョンを管理し、A/Bテストを実施する機能
6. **収益化オプション**: 有料モデルの提供や使用量ベースの課金システム
7. **コンプライアンスツール**: 各地域の規制に準拠するためのツールとガイドライン

これらの機能により、AIモデル開発者はTrust Chat Platform上で自身のモデルを簡単に提供し、管理することができるようになる。特に地域特化型のローカルLLMの開発者にとって、有用なプラットフォームとなることを目指している。

## 対応モデル

現在、以下のモデルに対応している：

1. **GPT-4 Mini** (OpenAI)
2. **Claude 3.5 Sonnet** (Anthropic)
3. **O1 Mini** (OpenAI)

各モデルは、それぞれのプロバイダーのAPIを使用して実装されている。

## トラブルシューティング

### 502エラーの解決方法

アプリケーションにアクセスする際に502エラーが発生した場合は、以下の手順を試すこと：

1. **キャニスターの再デプロイ**:
   ```bash
   dfx stop
   dfx start --clean --background
   dfx deploy
   ```

2. **サイクル残高の確認**:
   ```bash
   dfx wallet --network ic balance
   ```
   サイクル残高が不足している場合は、トップアップが必要である。

3. **ブラウザキャッシュのクリア**:
   ブラウザのキャッシュをクリアして、再度アクセスしてみること。

4. **ネットワーク接続の確認**:
   安定したインターネット接続があることを確認すること。

5. **ICネットワークのステータス確認**:
   [IC Dashboard](https://dashboard.internetcomputer.org/)でネットワークの状態を確認すること。

## 開発リソース

- [Internet Computer ドキュメント](https://internetcomputer.org/docs/current/developer-docs/setup/deploy-locally)
- [SDK 開発者ツール](https://internetcomputer.org/docs/current/developer-docs/setup/install)
- [Rust Canister 開発ガイド](https://internetcomputer.org/docs/current/developer-docs/backend/rust/)
- [ic-cdk](https://docs.rs/ic-cdk)
- [ic-cdk-macros](https://docs.rs/ic-cdk-macros)
- [Candid 入門](https://internetcomputer.org/docs/current/developer-docs/backend/candid/)

## 参考資料

- [ICPチップス](https://zenn.dev/mameta29/articles/82dcb3a1696be5)

## ライセンス

このプロジェクトはMITライセンスの下で公開されている。